<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:h="http://java.sun.com/jsf/html"
	  xmlns:ui="http://java.sun.com/jsf/facelets"
	  xmlns:f="http://java.sun.com/jsf/core"
	  xmlns:p="http://primefaces.org/ui">

<h:head>
	<title>Search and Select Code List</title>
	<style type="text/css">
            .ui-widget {
                font-size: 90%;
            }
        </style>
</h:head>

<h:body>
	<h:form id="form">
		<p:growl id="messages1" />
		<p:panel header="Search and Select Code List">
			<p:messages autoUpdate="true" />

			<h:panelGrid id="grid" columns="5" cellpadding="5">
				<h:outputLabel for="ccName" value="Code List:" style="font-weight:bold" />
				<p:autoComplete id="ccName" value="#{codeListBean.basedCodeListName}" completeMethod="#{codeListBean.completeInput}" />
				<p:commandButton value="Search" ajax="true" actionListener="#{codeListBean.search}" update="tbl" icon="ui-icon-search" />
			</h:panelGrid>
			<p:dataTable id="tbl" var="cVO" paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
                         paginator="true" paginatorPosition="bottom" rows="10" style="width:550px; margin-bottom:20px"
                         value="#{codeListBean.codeLists}" selection="#{codeListBean.selected}" rowKey="#{cVO.codeListId}" selectionMode="single">
				<p:ajax event="rowSelect" listener="#{codeListBean.onRowSelect}" />
				<p:ajax event="rowUnselect" listener="#{codeListBean.onRowUnselect}" />
				<p:column style="width:400px">
					<f:facet name="header">
						<h:outputText value="Name" />
					</f:facet>
					<h:outputText value="#{cVO.name}" />
				</p:column>

				<p:column style="width:100px">
					<f:facet name="header">
						<h:outputText value="Agency Id" />
					</f:facet>
					<h:outputText value="#{cVO.agencyId}" />
				</p:column>
			</p:dataTable>
			<p:commandButton ajax="true" icon="ui-icon-search" value="Select" actionListener="#{codeListBean.closeDialog}" />
		</p:panel>
		<input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>
	</h:form>
</h:body>

</html>