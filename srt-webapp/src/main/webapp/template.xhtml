<!DOCTYPE html [
        <!ENTITY nbsp "&#160;">
        <!ENTITY bull "&#8226;">
        <!ENTITY copy "&#169;">
        ]>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:p="http://primefaces.org/ui">
<h:head>
    <f:facet name="first">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <meta name="viewport"
              content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
        <meta name="apple-mobile-web-app-capable" content="yes"/>

    </f:facet>
    <!--
    <link rel="shortcut icon" type="image/png" href="images/oagi.png"/>
    -->
    <title>OAGi Semantic Refinement Tools</title>

    <h:outputStylesheet library="css" name="bootstrap-3.3.7.min.css"/>
    <h:outputStylesheet library="css" name="bootstrap-theme-3.3.7.min.css"/>
    <h:outputScript library="js" name="bootstrap-3.3.7.min.js"></h:outputScript>
    <h:outputStylesheet library="css" name="font-awesome-4.6.3.min.css"/>
    <h:outputStylesheet library="css" name="srt.css"/>
    <h:outputScript library="js" name="srt.js"></h:outputScript>

    <ui:insert name="head"/>
</h:head>

<h:body id="body">
    <h:form id="form" pt:autocomplete="false">
        <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>

        <div class="header" role="banner">
            <div class="container">
                <nav class="navbar">
                    <div class="container-fluid">
                        <div class="navbar-header">
                            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                                    data-target="#navbar-collapse-1" aria-expanded="false">
                                <span class="sr-only">Toggle navigation</span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                            </button>
                            <a class="navbar-brand" href="/">
                                <p:graphicImage name="images/oagi.png" width="126" height="38"
                                                style="border: 0; padding: 0; margin: -4px 15px 0 15px; !important"/>
                            </a>
                        </div>

                        <h:panelGroup rendered="#{request.userPrincipal != null}">
                            <div id="navbar-collapse-1">
                                <ul class="nav navbar-nav">
                                    <li class="dropdown menu-first">
                                        <h:outputLink id="menuProfileBods"
                                                      pt:href="#" styleClass="dropdown-toggle"
                                                      pt:data-toggle="dropdown" pt:role="button"
                                                      pt:aria-haspopup="true" pt:aria-expanded="false">
                                            <h:outputText value="#{resourceBean.term('topmenu.profile_bods')}"/>
                                            <span class="caret"></span>
                                        </h:outputLink>
                                        <p:tooltip id="toolTipProfileBods" for="menuProfileBods"
                                                   rendered="#{resourceBean.termKeyPrefix() ne 'ccts'}"
                                                   value="#{resourceBean.term('topmenu.profile_bods.tooltip')}"
                                                   position="right"/>

                                        <ul class="dropdown-menu">
                                            <li>
                                                <h:link styleClass="header-nav-link"
                                                        id="menuCreateProfileBod"
                                                        outcome="/views/profile_bod/create_profile_bod.jsf">
                                                    <h:outputText
                                                            value="#{resourceBean.term('submenu.create_profile_bod')}"/>
                                                </h:link>
                                                <p:tooltip id="toolTipCreateProfileBod" for="menuCreateProfileBod"
                                                           rendered="#{resourceBean.termKeyPrefix() ne 'ccts'}"
                                                           value="#{resourceBean.term('submenu.create_profile_bod.tooltip')}"
                                                           position="right"/>
                                            </li>
                                            <li>
                                                <h:link id="menuProfileBodList"
                                                        outcome="/views/profile_bod/list.jsf">
                                                    <h:outputText
                                                            value="#{resourceBean.term('submenu.profile_bod_list')}"/>
                                                </h:link>
                                                <p:tooltip id="toolTipProfileBodList" for="menuProfileBodList"
                                                           rendered="#{resourceBean.termKeyPrefix() ne 'ccts'}"
                                                           value="#{resourceBean.term('submenu.create_profile_bod.tooltip')}"
                                                           position="right"/>
                                            </li>
                                            <li>
                                                <h:link id="menuCopyProfileBod"
                                                        outcome="/views/profile_bod/copy_profile_bod.jsf">
                                                    <h:outputText
                                                            value="#{resourceBean.term('submenu.copy_profile_bod')}"/>
                                                </h:link>
                                                <p:tooltip id="toolTipCopyProfileBod" for="menuCopyProfileBod"
                                                           rendered="#{resourceBean.termKeyPrefix() ne 'ccts'}"
                                                           value="#{resourceBean.term('submenu.create_profile_bod.tooltip')}"
                                                           position="right"/>
                                            </li>
                                        </ul>
                                    </li>
                                    <li class="dropdown">
                                        <h:outputLink id="menuProfileBODExpression"
                                                      pt:href="#" styleClass="dropdown-toggle"
                                                      pt:data-toggle="dropdown" pt:role="button"
                                                      pt:aria-haspopup="true" pt:aria-expanded="false">
                                            <h:outputText value="#{resourceBean.term('topmenu.profile_bod_expression')}"/>
                                            <span class="caret"></span>
                                        </h:outputLink>
                                        <p:tooltip id="toolTipProfileBODExpression" for="menuProfileBODExpression"
                                                   rendered="#{resourceBean.termKeyPrefix() ne 'ccts'}"
                                                   value="#{resourceBean.term('topmenu.profile_bod_expression.tooltip')}"
                                                   position="right"/>
                                        <ul class="dropdown-menu">
                                            <li>
                                                <h:link id="menuGenerateExpression"
                                                        outcome="/views/generate_oagis/generate.jsf">
                                                    <h:outputText value="#{resourceBean.term('submenu.generate_expression')}"/>
                                                </h:link>
                                            </li>
                                        </ul>
                                    </li>
                                    <li class="dropdown">
                                        <h:outputLink id="menuContextManagement"
                                                      pt:href="#" styleClass="dropdown-toggle"
                                                      pt:data-toggle="dropdown" pt:role="button"
                                                      pt:aria-haspopup="true" pt:aria-expanded="false">
                                            <h:outputText value="#{resourceBean.term('topmenu.context_management')}"/>
                                            <span class="caret"></span>
                                        </h:outputLink>
                                        <ul class="dropdown-menu">
                                            <li>
                                                <h:link id="menuContextCategory"
                                                        outcome="/views/context_category/list.jsf">
                                                    <h:outputText value="#{resourceBean.term('submenu.context_category')}"/>
                                                </h:link>
                                            </li>
                                            <li>
                                                <h:link id="menuContextScheme"
                                                        outcome="/views/context_scheme/list.jsf">
                                                    <h:outputText value="#{resourceBean.term('submenu.context_scheme')}"/>
                                                </h:link>
                                            </li>
                                            <li>
                                                <h:link id="menuBusinessContext"
                                                        outcome="/views/business_context/list.jsf">
                                                    <h:outputText value="#{resourceBean.term('submenu.business_context')}"/>
                                                </h:link>
                                            </li>
                                        </ul>
                                    </li>
                                    <li class="dropdown">
                                        <h:outputLink id="menuCoreComponentManagement"
                                                      pt:href="#" styleClass="dropdown-toggle"
                                                      pt:data-toggle="dropdown" pt:role="button"
                                                      pt:aria-haspopup="true" pt:aria-expanded="false">
                                            <h:outputText value="#{resourceBean.term('topmenu.core_component_management')}"/>
                                            <span class="caret"></span>
                                        </h:outputLink>
                                        <p:tooltip id="toolTipCoreComponentManagement" for="menuCoreComponentManagement"
                                                   rendered="#{resourceBean.termKeyPrefix() ne 'ccts'}"
                                                   value="#{resourceBean.term('topmenu.core_component_management.tooltip')}"
                                                   position="right"/>
                                        <ul class="dropdown-menu">
                                            <li>
                                                <h:link id="menuCoreComponent"
                                                        outcome="/views/core_component/list.jsf">
                                                    <h:outputText value="#{resourceBean.term('submenu.core_component')}"/>
                                                </h:link>
                                                <p:tooltip id="toolTipMenuCoreComponent" for="menuCoreComponent"
                                                           rendered="#{resourceBean.termKeyPrefix() ne 'ccts'}"
                                                           value="#{resourceBean.term('submenu.core_component.tooltip')}"
                                                           position="right"/>
                                            </li>
                                            <h:panelGroup rendered="#{authenticationBean.oagisDeveloper eq true}">
                                                <li>
                                                    <h:link id="menuNamespace"
                                                            outcome="/views/namespace/list.jsf">
                                                        <h:outputText value="#{resourceBean.term('submenu.namespace')}"/>
                                                    </h:link>
                                                </li>
                                                <li>
                                                    <h:link id="menuReleaseManagement"
                                                            outcome="/views/core_component/release/list.jsf">
                                                        <h:outputText value="#{resourceBean.term('submenu.release_management')}"/>
                                                    </h:link>
                                                </li>
                                            </h:panelGroup>
                                            <li>
                                                <h:link id="menuModuleManagement"
                                                        outcome="/views/core_component/module/list.jsf">
                                                    <h:outputText value="#{resourceBean.term('submenu.module_management')}"/>
                                                </h:link>
                                                <p:tooltip id="toolTipMenuModuleManagement" for="menuModuleManagement"
                                                           rendered="#{resourceBean.termKeyPrefix() ne 'ccts'}"
                                                           value="#{resourceBean.term('submenu.module_management.tooltip')}"
                                                           position="right"/>
                                            </li>
                                        </ul>
                                    </li>
                                    <li class="dropdown">
                                        <h:outputLink id="menuCodeList"
                                                      pt:href="#" styleClass="dropdown-toggle"
                                                      pt:data-toggle="dropdown" pt:role="button"
                                                      pt:aria-haspopup="true" pt:aria-expanded="false">
                                            <h:outputText value="#{resourceBean.term('topmenu.code_list')}"/>
                                            <span class="caret"></span>
                                        </h:outputLink>
                                        <p:tooltip id="toolTipCodeList" for="menuCodeList"
                                                   rendered="#{resourceBean.termKeyPrefix() ne 'ccts'}"
                                                   value="#{resourceBean.term('topmenu.code_list.tooltip')}"
                                                   position="right"/>
                                        <ul class="dropdown-menu">
                                            <li>
                                                <h:link id="menuViewCodeList"
                                                        outcome="/views/code_list/list.jsf">
                                                    <h:outputText value="#{resourceBean.term('submenu.view_code_list')}"/>
                                                </h:link>
                                            </li>
                                            <li>
                                                <h:link id="menuCreateCodeListWithoutBase"
                                                        outcome="/views/code_list/create_wo_base.jsf">
                                                    <h:outputText value="#{resourceBean.term('submenu.create_code_list_without_base')}"/>
                                                </h:link>
                                            </li>
                                            <li>
                                                <h:link id="menuCreateCodeListFromAnother"
                                                        outcome="/views/code_list/create_from_another_selection.jsf">
                                                    <h:outputText value="#{resourceBean.term('submenu.create_code_list_from_another')}"/>
                                                </h:link>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                                <ul class="nav navbar-nav navbar-right">
                                    <li class="dropdown">
                                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button"
                                           aria-haspopup="true" aria-expanded="false">#{request.userPrincipal.name}
                                            <span
                                                    class="caret"></span></a>
                                        <ul class="dropdown-menu">
                                            <li><span class="disabled">Signed in as #{request.userPrincipal.name}</span>
                                            </li>
                                            <li role="separator" class="divider"></li>

                                            <li>
                                                <h:panelGroup onclick="cctsClick()">
                                                    <a href="#">
                                                        <span><i class="fa fa-check" aria-hidden="true"
                                                                 style="#{resourceBean.termKeyPrefix() ne 'ccts' ? 'visibility: hidden' : ''}"></i> CCTS Terminology</span>
                                                    </a>
                                                </h:panelGroup>
                                                <p:remoteCommand name="cctsClick" update=":form"
                                                                 actionListener="#{resourceBean.termKeyPrefix('ccts')}"/>
                                            </li>
                                            <li>
                                                <h:panelGroup onclick="oagisClick()">
                                                    <a href="#">
                                                        <span><i class="fa fa-check" aria-hidden="true"
                                                                 style="#{resourceBean.termKeyPrefix() ne 'oagis' ? 'visibility: hidden' : ''}"></i> OAGIS Terminology</span>
                                                    </a>
                                                </h:panelGroup>
                                                <p:remoteCommand name="oagisClick" update=":form"
                                                                 actionListener="#{resourceBean.termKeyPrefix('oagis')}"/>
                                            </li>

                                            <h:panelGroup rendered="#{authenticationBean.oagisDeveloper eq true}">
                                                <li role="separator" class="divider"></li>
                                                <li><h:link
                                                        outcome="/views/user/manage_account.jsf">Manage Account</h:link>
                                                </li>
                                            </h:panelGroup>

                                            <li role="separator" class="divider"></li>
                                            <li><h:link outcome="/views/user/settings.jsf">Settings</h:link></li>
                                            <li><a href="/logout">Sign out</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                        </h:panelGroup>
                    </div>
                </nav>
            </div>
        </div>

        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="main">
                        <ui:insert name="content"/>
                    </div>
                </div>
            </div>
        </div>
    </h:form>

    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="footer">
                    <span class="copyright">© 2015-18 <a href="http://www.oagi.org">Open Application Group, Inc</a>. All rights reserved.</span>
                </div>
            </div>
        </div>
    </div>

    <p:blockUI widgetVar="loadingBlock" block="body">
        <i class="fa fa-spinner fa-spin fa-3x fa-fw"></i>
        <span style="display: block; margin-top: 10px;">Processing...</span>
    </p:blockUI>

    <script>
        $(document).ready(function () {
            $('.fa-spin').parent().addClass('loading-block');
            $('[name="javax.faces.ViewState"]').appendTo($('[name="form"]'));
        });
    </script>
</h:body>
</html>
