<mat-sidenav-container class="example-container" [hasBackdrop]="false">
  <mat-sidenav #sidenav>

  </mat-sidenav>

  <mat-sidenav-content (click)="sidenav.close();">
    <div class="cdk-overlay-backdrop cdk-overlay-dark-backdrop cdk-overlay-backdrop-showing" *ngIf="loading">
      <mat-progress-bar mode="indeterminate"></mat-progress-bar>
    </div>
    <div class="context-section">
      <div class="row m-0">
        <div class="col-12 p-0">
          <mat-card class="search-box-container p-md-0">
            <mat-card-content>
              <div class="container-fluid" *ngIf="searcher && dataSource">
                <div class="row">
                  <div class="col-5 tree-search-box">
                    <div class="row">
                      <div class="col-9">
                        <mat-form-field>
                          <mat-placeholder *ngIf="!selectedNode">Search</mat-placeholder>
                          <mat-placeholder *ngIf="selectedNode">Search > {{selectedNode.name}}</mat-placeholder>
                          <input matInput type="search" [(ngModel)]="searcher.inputKeyword"
                                 (keyup.enter)="search(searcher.inputKeyword)">
                          <mat-hint matSuffix *ngIf="searcher.searchResult.length > 0"
                                    align="end">{{searcher.searchIndex + 1}}/{{searcher.searchResult.length}}+</mat-hint>
                          <mat-hint matSuffix *ngIf="searcher.searchResult.length === 0"
                                    align="end">0/0</mat-hint>
                        </mat-form-field>
                      </div>
                      <div class="col-3 buttons">
                        <button mat-icon-button
                                [disabled]="!searcher.searchResult || searcher.searchResult.length === 0"
                                (click)="move(-1)">
                          <mat-icon>keyboard_arrow_up</mat-icon>
                        </button>
                        <button mat-icon-button
                                [disabled]="!searcher.searchResult || searcher.searchResult.length === 0"
                                (click)="move(1)">
                          <mat-icon>keyboard_arrow_down</mat-icon>
                        </button>
                        <button mat-icon-button
                                (click)="search(searcher.inputKeyword, false, true)">
                          <mat-icon>search</mat-icon>
                        </button>
                        <button mat-icon-button
                                [hidden]="!searcher.inputKeyword"
                                (click)="searcher.resetSearch()">
                          <mat-icon>close</mat-icon>
                        </button>
                        <div style="height: 19px;">
                          <mat-progress-spinner mode="indeterminate" [diameter]="15" class="search-progress-bar"
                                                [hidden]="!searcher.isSearching"></mat-progress-spinner>
                        </div>
                        <div class="ml-auto align-self-center pl-2">
                          <mat-checkbox class="exclude-scs"
                                        [(ngModel)]="excludeSCs" (change)="changeExcludeSCs()">
                            <span>Exclude SCs</span>
                          </mat-checkbox>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-7 actions-wrap">
                    <div class="actions ml-auto">
                      <mat-checkbox class="hide-unused"
                                    [(ngModel)]="treeControl.hideUnused">
                        <span>Hide unused</span>
                      </mat-checkbox>
                      <button mat-raised-button color="primary" (click)="updateDetails()"
                              *ngIf="state === 'WIP'"
                              [disabled]="isUpdating || !isChanged || access !== 'CanEdit' || !isValid">
                        Update
                      </button>
                      <button mat-raised-button color="accent" (click)="updateState('QA')"
                              *ngIf="state === 'WIP'"
                              [disabled]="isUpdating || isChanged || access !== 'CanEdit' || !isValid">
                        Move to QA
                      </button>
                      <button mat-raised-button color="warn" (click)="updateState('WIP')"
                              *ngIf="state === 'QA'"
                              [disabled]="isUpdating || access !== 'CanMove'">
                        Back to WIP
                      </button>
                      <button mat-raised-button color="accent" (click)="updateState('Production')"
                              *ngIf="state === 'QA'"
                              [disabled]="isUpdating || access !== 'CanMove'">
                        Move to Production
                      </button>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="tree-breadcrumbs-wrap" id="tree-breadcrumbs-wrap" *ngIf="selectedNode">
                    <div class="tree-breadcrumb"
                           *ngFor="let bread of selectedNode.parents; let last = last;">
                      <span aria-hidden="true" class="tree-breadcrumb-separator">/</span>
                      <span *ngIf="last"
                            class="tree-breadcrumb-item-last">{{ bread.name }} {{ last ? scrollBreadcrumb('tree-breadcrumbs-wrap') : '' }}</span>
                      <span *ngIf="!last" class="tree-breadcrumb-item"
                            (click)="scrollToNode(bread)">{{ bread.name }}</span>
                    </div>
                  </div>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </div>

      <div class="row m-0" (window:resize)="onResize($event)">
        <div class="col-12 p-0">
          <as-split unit="percent" [direction]="'horizontal'" style="overflow-y: scroll;">
            <as-split-area class="left-panel" size="30">
              <mat-card class="bie-node-tree-panel">
                <mat-card-content class="mat-card-container">
                  <cdk-virtual-scroll-viewport itemSize="33"
                                               [style.height.px]="innerHeight" #virtualScroll>
                    <div *cdkVirtualFor="let node of dataSource" class="example-item">
                      <div class="mat-tree-node d-flex pointer"
                           tabIndex="0"
                           [attr.data-path]="node.path"
                           [class]="{'tree-node-selected': cursorNode === node}"
                           (click)="onClick(node, $event)"
                           (keydown)="keyNavigation($event)"
                           [style.padding-left]="node.level * paddingPixel + 'px'">
                        <button *ngIf="treeControl.isExpandable(node); else disabledRef;"
                                (click)="toggle(node, $event)"
                                class="align-self-center"
                                mat-icon-button>
                          <mat-icon class="mat-icon-rtl-mirror">
                            {{ treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right' }}
                          </mat-icon>
                        </button>
                        <ng-template #disabledRef>
                          <button mat-icon-button disabled></button>
                        </ng-template>

                        <mat-checkbox class="pr-2"
                                      *ngIf="node.level > 0"
                                      [checked]="node.used"
                                      [disabled]="!isUsable(node)"
                                      (click)="toggleTreeUsed(node, $event)"
                                      [matTooltip]="getNodeTooltip(node)"
                                      [matTooltipDisabled]="getNodeTooltip(node) === ''">
                        </mat-checkbox>

                        <span [class]="['pr-2', 'align-self-center', node.type.toLowerCase(),
                          node.deprecated ? 'deprecated' : 'dummy',
                          this.searcher.searchResult.indexOf(node) > -1 ? 'inside' : 'outside',
                          this.searcher.searchResult.indexOf(node) === this.searcher.searchIndex ? 'search-index' : 'asd']"
                              [innerHTML]="node.name | highlight : searcher.searchKeyword">
                        </span>
                        <mat-icon matTooltip="Reused"
                                  fontSet="fontawesome"
                                  fontIcon="fa-recycle"
                                  class="pointer" *ngIf="node.derived"
                                  (click)="openNewEditBieTab(node)"></mat-icon>
                        <mat-icon class="align-self-center ml-auto"
                                  *ngIf="treeControl.isExpandable(node)"
                                  (click)="onContextMenu($event, node)">more_vert
                        </mat-icon>
                      </div>
                    </div>
                  </cdk-virtual-scroll-viewport>

                  <!-- Context Menu Area -->
                  <context-menu #defaultContextMenu>
                    <ng-template contextMenuItem (execute)="treeControl.expandDescendants($event.item, 2)">
                      <span class="context-menu-item">Expand 2</span>
                    </ng-template>
                    <ng-template contextMenuItem (execute)="treeControl.expandDescendants($event.item, 3)">
                      <span class="context-menu-item">Expand 3</span>
                    </ng-template>
                    <ng-template contextMenuItem (execute)="treeControl.expandDescendants($event.item)">
                      <span class="context-menu-item">Expand All</span>
                    </ng-template>
                    <ng-template contextMenuItem divider="true" [visible]="canCreateBIEFromThis">
                    </ng-template>
                    <ng-template contextMenuItem (execute)="createBIEfromThis($event.item)" [visible]="canCreateBIEFromThis">
                      <span class="context-menu-item">Make BIE reusable</span>
                    </ng-template>
                  </context-menu>

                  <context-menu #developerContextMenu>
                    <ng-template contextMenuItem (execute)="treeControl.expandDescendants($event.item, 2)">
                      <span class="context-menu-item">Expand 2</span>
                    </ng-template>
                    <ng-template contextMenuItem (execute)="treeControl.expandDescendants($event.item, 3)">
                      <span class="context-menu-item">Expand 3</span>
                    </ng-template>
                    <ng-template contextMenuItem (execute)="treeControl.expandDescendants($event.item)">
                      <span class="context-menu-item">Expand All</span>
                    </ng-template>
                    <ng-template contextMenuItem divider="true" [visible]="canSeeReuseContextMenus">
                    </ng-template>
                    <ng-template contextMenuItem (execute)="reuseBIE($event.item)" [visible]="canReuseBIE">
                      <span class="context-menu-item">Reuse BIE</span>
                    </ng-template>
                    <ng-template contextMenuItem (execute)="createBIEfromThis($event.item)" [visible]="canCreateBIEFromThis">
                      <span class="context-menu-item">Make BIE reusable</span>
                    </ng-template>
                    <ng-template contextMenuItem (execute)="removeReusedBIE($event.item)" [visible]="canRemoveReusedBIE">
                      <span class="context-menu-item">Remove Reused BIE</span>
                    </ng-template>
                    <ng-template contextMenuItem divider="true" [visible]="isExtension">
                    </ng-template>
                    <ng-template contextMenuItem let-item [visible]="isExtension">
                      <span class="context-menu-item" [attr.disabled]="true"
                            [matTooltip]="'Developer cannot create ABIE Extension'">Create ABIE Extension Locally</span>
                    </ng-template>
                    <ng-template contextMenuItem let-item [visible]="isExtension">
                      <span class="context-menu-item" [attr.disabled]="true"
                            [matTooltip]="'Developer cannot create ABIE Extension'">Create ABIE Extension Globally</span>
                    </ng-template>
                    <ng-template contextMenuItem divider="true" *ngIf="canEdit" [visible]="isUsableChildren || isCardinalityEditable"></ng-template>
                    <ng-template contextMenuItem let-item *ngIf="canEdit" [visible]="isUsableChildren" (execute)="enableChildren($event.item)">
                      <span class="context-menu-item">Enable Children</span>
                    </ng-template>
                    <ng-template contextMenuItem let-item *ngIf="canEdit" [visible]="isCardinalityEditable" (execute)="setMaxCardinality($event.item)">
                      <span class="context-menu-item">Set Children Max Cardinality to 1</span>
                    </ng-template>
                  </context-menu>

                  <context-menu #endUserContextMenu>
                    <ng-template contextMenuItem (execute)="treeControl.expandDescendants($event.item, 2)">
                      <span class="context-menu-item">Expand 2</span>
                    </ng-template>
                    <ng-template contextMenuItem (execute)="treeControl.expandDescendants($event.item, 3)">
                      <span class="context-menu-item">Expand 3</span>
                    </ng-template>
                    <ng-template contextMenuItem (execute)="treeControl.expandDescendants($event.item)">
                      <span class="context-menu-item">Expand All</span>
                    </ng-template>
                    <ng-template contextMenuItem divider="true" [visible]="canSeeReuseContextMenus">
                    </ng-template>
                    <ng-template contextMenuItem (execute)="reuseBIE($event.item)" [visible]="canReuseBIE">
                      <span class="context-menu-item">Reuse BIE</span>
                    </ng-template>
                    <ng-template contextMenuItem (execute)="createBIEfromThis($event.item)" [visible]="canCreateBIEFromThis">
                      <span class="context-menu-item">Make BIE reusable</span>
                    </ng-template>
                    <ng-template contextMenuItem (execute)="removeReusedBIE($event.item)" [visible]="canRemoveReusedBIE">
                      <span class="context-menu-item">Remove Reused BIE</span>
                    </ng-template>
                    <ng-template contextMenuItem divider="true" [visible]="isExtension">
                    </ng-template>
                    <ng-template contextMenuItem let-item (execute)="createLocalAbieExtension($event.item)" [visible]="isExtension">
                      <span class="context-menu-item">Create ABIE Extension Locally</span>
                    </ng-template>
                    <ng-template contextMenuItem let-item (execute)="createGlobalAbieExtension($event.item)" [visible]="isExtension">
                      <span class="context-menu-item">Create ABIE Extension Globally</span>
                    </ng-template>
                    <ng-template contextMenuItem divider="true" *ngIf="canEdit" [visible]="isUsableChildren || isCardinalityEditable"></ng-template>
                    <ng-template contextMenuItem let-item *ngIf="canEdit" [visible]="isUsableChildren" (execute)="enableChildren($event.item)">
                      <span class="context-menu-item">Enable Children</span>
                    </ng-template>
                    <ng-template contextMenuItem let-item *ngIf="canEdit" [visible]="isCardinalityEditable" (execute)="setMaxCardinality($event.item)">
                      <span class="context-menu-item">Set Children Max Cardinality to 1</span>
                    </ng-template>
                  </context-menu>
                </mat-card-content>
              </mat-card>
            </as-split-area>

            <as-split-area class="right-panel" size="70" [style.height.px]="innerHeight + 17">
              <!-- ABIE -->
              <div class="bie-edit-detail-panel scroll" *ngIf="isAbieDetail() && asAbieDetail().isLoaded ">
                <mat-tab-group mat-align-tabs="start">
                  <mat-tab label="{{ selectedNode.name }}">
                    <div class="bie-edit-detail-container">
                      <div class="row">
                        <div class="col-4">
                          <mat-form-field>
                            <mat-label>Release</mat-label>
                            <input matInput [(ngModel)]="rootNode.releaseNum" [disabled]="true">
                          </mat-form-field>
                        </div>
                        <div class="col-4">
                          <mat-form-field>
                            <mat-label>State</mat-label>
                            <input matInput [(ngModel)]="rootNode.topLevelAsbiepState" [disabled]="true">
                          </mat-form-field>
                        </div>
                        <div class="col-3">
                          <mat-form-field>
                            <mat-label>Owner</mat-label>
                            <input matInput [(ngModel)]="rootNode.loginId" [disabled]="true">
                          </mat-form-field>
                        </div>
                        <div class="col-1">
                          <button mat-icon-button (click)="resetDetail(selectedNode)"
                                  *ngIf="state === 'WIP'"
                                  matTooltip="Reset detail"
                                  [disabled]="isUpdating || access !== 'CanEdit'">
                            <mat-icon>refresh</mat-icon>
                          </button>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-md-12 col-sm-12">
                          <mat-form-field class="{{ !canEdit ? 'mat-form-field-disabled' : '' }}">
                            <mat-chip-list #businessContextChipList aria-label="Business Contexts">
                              <mat-chip
                                *ngFor="let businessContext of businessContexts"
                                [disabled]="!canEdit"
                                [selectable]="false"
                                [removable]="isBusinessContextRemovable"
                                (removed)="removeBusinessContext(businessContext)">
                                {{ businessContext.name }}
                                <mat-icon matChipRemove disabled="isBusinessContextRemovable">cancel</mat-icon>
                              </mat-chip>
                              <input
                                placeholder="Business Context"
                                #businessContextInput
                                [formControl]="businessContextCtrl"
                                [matAutocomplete]="auto"
                                [matAutocompleteDisabled]="!canEdit"
                                [matChipInputFor]="businessContextChipList"
                                [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                                [matChipInputAddOnBlur]="addOnBlur">
                            </mat-chip-list>
                            <mat-autocomplete #auto="matAutocomplete" (optionSelected)="addBusinessContext($event)">
                              <mat-option *ngFor="let businessContext of filteredBusinessContexts | async"
                                          [value]="businessContext">
                                {{ businessContext.name }}
                              </mat-option>
                            </mat-autocomplete>
                          </mat-form-field>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-md-6 col-sm-12">
                          <mat-form-field>
                            <input matInput placeholder="Business Term" maxlength="225"
                                   [(ngModel)]="asAbieDetail().asbiep.bizTerm"
                                   [disabled]="!isEditable(selectedNode)">
                          </mat-form-field>
                        </div>
                        <div class="col-md-6 col-sm-12">
                          <mat-form-field>
                            <input matInput placeholder="Remark" maxlength="225"
                                   [(ngModel)]="asAbieDetail().asbiep.remark"
                                   [disabled]="!isEditable(selectedNode)">
                          </mat-form-field>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-md-6 col-sm-12">
                          <mat-form-field>
                            <input matInput placeholder="Version" maxlength="45"
                                   [(ngModel)]="rootNode.version"
                                   [disabled]="!isEditable(selectedNode)">
                          </mat-form-field>
                        </div>
                        <div class="col-md-6 col-sm-12">
                          <mat-form-field>
                            <input matInput placeholder="Status" maxlength="45"
                                   [(ngModel)]="rootNode.status"
                                   [disabled]="!isEditable(selectedNode)">
                          </mat-form-field>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-12">
                          <mat-form-field>
                            <textarea matInput rows="6"
                                      placeholder="Context Definition"
                                      [(ngModel)]="asAbieDetail().asbiep.definition"
                                      [disabled]="!isEditable(selectedNode)">
                            </textarea>
                          </mat-form-field>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-12">
                          <mat-form-field>
                            <textarea matInput rows="6"
                                      placeholder="Component Definition" [disabled]="true"
                                      value="{{ asAbieDetail().asccp.definition || ' ' }}">
                            </textarea>
                          </mat-form-field>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-12">
                          <mat-form-field>
                            <textarea matInput rows="6"
                                      placeholder="Type Definition" [disabled]="true"
                                      value="{{ asAbieDetail().acc.definition || ' ' }}">
                            </textarea>
                          </mat-form-field>
                        </div>
                      </div>
                    </div>
                  </mat-tab>
                </mat-tab-group>
              </div>

              <!-- ASBIEP -->
              <div class="bie-edit-detail-panel scroll" *ngIf="isAsbiepDetail()">
                <mat-tab-group mat-align-tabs="start">
                  <mat-tab label="{{ selectedNode.name }}">
                    <div class="bie-edit-detail-container">
                      <div class="row">
                        <div class="col-6">
                          <div class="checkbox">
                            <mat-checkbox color="primary"
                                          [disabled]="!isUsable(selectedNode)"
                                          [checked]="selectedNode.used"
                                          (click)="toggleDetailUsed(selectedNode, $event)"
                                          matTooltip="This component is required."
                                          [matTooltipDisabled]="!selectedNode.required">
                              Used
                            </mat-checkbox>
                          </div>
                        </div>
                        <div class="col-5">
                          <div class="checkbox">
                            <mat-checkbox color="primary"
                                          [(ngModel)]="asAsbiepDetail().asbie.nillable"
                                          matTooltip="This property cannot change since the Core Component is not nillable."
                                          [matTooltipDisabled]="asAsbiepDetail().asccp.nillable"
                                          [disabled]="!isEditable(selectedNode) ||
                                                      !asAsbiepDetail().asccp.nillable">
                              Nillable
                            </mat-checkbox>
                          </div>
                        </div>
                        <div class="col-1">
                          <button mat-icon-button (click)="resetDetail(selectedNode)"
                                  *ngIf="state === 'WIP'"
                                  matTooltip="Reset detail"
                                  [disabled]="isUpdating || access !== 'CanEdit' || !selectedNode.used">
                            <mat-icon>refresh</mat-icon>
                          </button>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-6">
                          <mat-form-field>
                            <input matInput placeholder="Cardinality Min" required
                                   [formControl]="bieCardinalityMin">
                            <mat-error *ngIf="bieCardinalityMin.hasError('required')">
                              Cardinality Min is <strong>required</strong>
                            </mat-error>
                            <mat-error
                              *ngIf="!bieCardinalityMin.hasError('min') && bieCardinalityMin.hasError('pattern')">
                              '{{ bieCardinalityMin.value }}' is not allowed for Cardinality Min
                            </mat-error>
                            <mat-error *ngIf="bieCardinalityMin.hasError('min')">
                              Cardinality Min must be greater than or equals
                              to {{ asAsbiepDetail().ascc && asAsbiepDetail().ascc.cardinalityMin }}
                            </mat-error>
                            <mat-error *ngIf="bieCardinalityMin.hasError('max')">
                              {{ bieCardinalityMin.getError('max') }}
                            </mat-error>
                          </mat-form-field>
                        </div>
                        <div class="col-6">
                          <mat-form-field>
                            <input matInput placeholder="Cardinality Max (-1 for unbounded, Standard is {{ asAsbiepDetail().ascc.cardinalityMax | unbounded}})" required
                                   [formControl]="bieCardinalityMax"
                                   [value]="bieCardinalityMax.value | unbounded">
                            <mat-hint *ngIf="bieCardinalityMax.valid && asAsbiepDetail().asbie && asAsbiepDetail().asbie.cardinalityMax === 0 &&
                                            (!asAsbiepDetail().asbie.definition || asAsbiepDetail().asbie.definition === '')"
                                      style="color: #ff5722;">
                              Context Definition should define why Cardinality Max is zero (0)
                            </mat-hint>

                            <mat-error *ngIf="bieCardinalityMax.hasError('required')">
                              Cardinality Max is <strong>required</strong>
                            </mat-error>
                            <mat-error *ngIf="bieCardinalityMax.hasError('pattern')">
                              '{{ bieCardinalityMax.value }}' is not allowed for Cardinality Max
                            </mat-error>
                            <mat-error *ngIf="bieCardinalityMax.hasError('min')">
                              {{ bieCardinalityMax.getError('min') }}
                            </mat-error>
                            <mat-error *ngIf="bieCardinalityMax.hasError('max')">
                              {{ bieCardinalityMax.getError('max') }}
                            </mat-error>
                          </mat-form-field>
                        </div>
                      </div>

                      <div class="row" *ngIf="selectedNode && !selectedNode.derived && !reusedNode">
                        <div class="col-md-6 col-sm-12">
                          <mat-form-field>
                            <input matInput placeholder="Business Term" maxlength="225"
                                   [(ngModel)]="asAsbiepDetail().asbiep.bizTerm"
                                   [disabled]="!isEditable(selectedNode)">
                          </mat-form-field>
                        </div>
                        <div class="col-md-6 col-sm-12">
                          <mat-form-field>
                            <input matInput placeholder="Remark" maxlength="225"
                                   [(ngModel)]="asAsbiepDetail().asbiep.remark"
                                   [disabled]="!isEditable(selectedNode)">
                          </mat-form-field>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-12">
                          <mat-form-field>
                            <textarea matInput rows="6"
                                      placeholder="Context Definition"
                                      [(ngModel)]="asAsbiepDetail().asbie.definition"
                                      [disabled]="!isEditable(selectedNode)">
                            </textarea>
                          </mat-form-field>
                        </div>
                      </div>

                      <div *ngIf="selectedNode && selectedNode.derived && reusedNode && reusedNodeDetail" class="detail-reused">
                        <h4 class="mb-2"> From Reused BIE</h4>
                        <div class="row">
                          <div class="col-4">
                            <mat-form-field>
                              <mat-label>Release</mat-label>
                              <input matInput [(ngModel)]="reusedNode.releaseNum" [disabled]="true">
                            </mat-form-field>
                          </div>
                          <div class="col-4">
                            <mat-form-field>
                              <mat-label>State</mat-label>
                              <input matInput [(ngModel)]="reusedNode.topLevelAsbiepState" [disabled]="true">
                            </mat-form-field>
                          </div>
                          <div class="col-4">
                            <mat-form-field>
                              <mat-label>Owner</mat-label>
                              <input matInput [(ngModel)]="reusedNode.loginId" [disabled]="true">
                            </mat-form-field>
                          </div>
                        </div>
                        <mat-form-field *ngIf="reusedBusinessContexts.length > 0">
                          <mat-chip-list #reusedBusinessContextChipList aria-label="Business Contexts">
                            <mat-chip
                              *ngFor="let businessContext of reusedBusinessContexts"
                              [selectable]="false"
                              [removable]="false">
                              {{ businessContext.name }}
                            </mat-chip>
                            <input
                              placeholder="Business Context"
                              [matChipInputFor]="reusedBusinessContextChipList">
                          </mat-chip-list>
                        </mat-form-field>
                        <div class="row">
                          <div class="col-md-6 col-sm-12">
                            <mat-form-field>
                              <input matInput placeholder="Version" maxlength="225"
                                     [value]="reusedNode.version"
                                     [disabled]="true">
                            </mat-form-field>
                          </div>
                          <div class="col-md-6 col-sm-12">
                            <mat-form-field>
                              <input matInput placeholder="Status" maxlength="225"
                                     [value]="reusedNode.status"
                                     [disabled]="true">
                            </mat-form-field>
                          </div>
                        </div>

                        <div class="row">
                          <div class="col-md-6 col-sm-12">
                            <mat-form-field>
                              <input matInput placeholder="Business Term" maxlength="225"
                                     [value]="reusedNodeDetail.asbiep.bizTerm"
                                     [disabled]="true">
                            </mat-form-field>
                          </div>
                          <div class="col-md-6 col-sm-12">
                            <mat-form-field>
                              <input matInput placeholder="Remark" maxlength="225"
                                     [value]="reusedNodeDetail.asbiep.remark"
                                     [disabled]="true">
                            </mat-form-field>
                          </div>
                        </div>

                        <mat-form-field>
                        <textarea matInput rows="6"
                                  placeholder="Context Definition"
                                  [value]="reusedNodeDetail.asbiep.definition"
                                  [disabled]="true"></textarea>
                        </mat-form-field>
                      </div>

                      <div class="row">
                        <div class="col-md-12 col-sm-12">
                          <mat-form-field>
                            <textarea matInput rows="6"
                                      placeholder="Association Definition" [disabled]="true"
                                      value="{{ asAsbiepDetail().ascc.definition || ' ' }}">
                            </textarea>
                          </mat-form-field>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-md-12 col-sm-12">
                          <mat-form-field>
                            <textarea matInput rows="6"
                                      placeholder="Component Definition" [disabled]="true"
                                      value="{{ asAsbiepDetail().asccp.definition || ' ' }}">
                            </textarea>
                          </mat-form-field>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-md-12 col-sm-12">
                          <mat-form-field>
                            <textarea matInput rows="6"
                                      placeholder="Type Definition" [disabled]="true"
                                      value="{{ asAsbiepDetail().acc.definition || ' ' }}">
                            </textarea>
                          </mat-form-field>
                        </div>
                      </div>
                    </div>
                  </mat-tab>
                </mat-tab-group>
              </div>

              <!-- BBIEP -->
              <div class="bie-edit-detail-panel scroll" *ngIf="isBbiepDetail()">
                <mat-tab-group mat-align-tabs="start">
                  <mat-tab label="{{ selectedNode.name }}">
                    <div class="bie-edit-detail-container">
                      <div class="row">
                        <div class="col-6">
                          <div class="checkbox">
                            <mat-checkbox color="primary"
                                          [checked]="selectedNode.used"
                                          (click)="toggleDetailUsed(selectedNode, $event)"
                                          [disabled]="!isUsable(selectedNode)"
                                          matTooltip="This component is required."
                                          [matTooltipDisabled]="!selectedNode.required">
                              Used
                            </mat-checkbox>
                          </div>
                        </div>
                        <div class="col-5">
                          <div class="checkbox">
                            <mat-checkbox color="primary"
                                          [(ngModel)]="asBbiepDetail().bbie.nillable"
                                          matTooltip="This property cannot change since the Core Component is not nillable."
                                          [matTooltipDisabled]="asBbiepDetail().bccp.nillable"
                                          [disabled]="!isEditable(selectedNode)||
                                                      !asBbiepDetail().bccp.nillable">
                              Nillable
                            </mat-checkbox>
                          </div>
                        </div>
                        <div class="col-1">
                          <button mat-icon-button (click)="resetDetail(selectedNode)"
                                  *ngIf="state === 'WIP'"
                                  matTooltip="Reset detail"
                                  [disabled]="isUpdating || access !== 'CanEdit' || !selectedNode.used">
                            <mat-icon>refresh</mat-icon>
                          </button>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-6">
                          <mat-form-field>
                            <input matInput placeholder="Cardinality Min" required
                                   [formControl]="bieCardinalityMin">
                            <mat-error *ngIf="bieCardinalityMin.hasError('required')">
                              Cardinality Min is <strong>required</strong>
                            </mat-error>
                            <mat-error
                              *ngIf="!bieCardinalityMin.hasError('min') && bieCardinalityMin.hasError('pattern')">
                              '{{ bieCardinalityMin.value }}' is not allowed for Cardinality Min
                            </mat-error>
                            <mat-error *ngIf="bieCardinalityMin.hasError('min')">
                              Cardinality Min must be greater than or equals to {{ asBbiepDetail().bcc.cardinalityMin }}
                            </mat-error>
                            <mat-error *ngIf="bieCardinalityMin.hasError('max')">
                              {{ bieCardinalityMin.getError('max') }}
                            </mat-error>
                          </mat-form-field>
                        </div>
                        <div class="col-6">
                          <mat-form-field>
                            <input matInput placeholder="Cardinality Max (-1 for unbounded, Standard is {{ asBbiepDetail().bcc.cardinalityMax | unbounded}})" required
                                   [formControl]="bieCardinalityMax"
                                   [value]="bieCardinalityMax.value | unbounded">
                            <mat-hint *ngIf="bieCardinalityMax.valid && asBbiepDetail().bbie.cardinalityMax === 0 &&
                                            (!asBbiepDetail().bbie.definition || asBbiepDetail().bbie.definition === '')"
                                      style="color: #ff5722;">
                              Context Definition should define why Cardinality Max is zero (0)
                            </mat-hint>

                            <mat-error *ngIf="bieCardinalityMax.hasError('required')">
                              Cardinality Max is <strong>required</strong>
                            </mat-error>
                            <mat-error *ngIf="bieCardinalityMax.hasError('pattern')">
                              '{{ bieCardinalityMax.value }}' is not allowed for Cardinality Max
                            </mat-error>
                            <mat-error *ngIf="bieCardinalityMax.hasError('min')">
                              {{ bieCardinalityMax.getError('min') }}
                            </mat-error>
                            <mat-error *ngIf="bieCardinalityMax.hasError('max')">
                              {{ bieCardinalityMax.getError('max') }}
                            </mat-error>
                          </mat-form-field>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-md-6 col-sm-12">
                          <mat-form-field>
                            <input matInput placeholder="Business Term" maxlength="225"
                                   [(ngModel)]="asBbiepDetail().bbiep.bizTerm"
                                   [disabled]="!isEditable(selectedNode)">
                          </mat-form-field>
                        </div>
                        <div class="col-md-6 col-sm-12">
                          <mat-form-field>
                            <input matInput placeholder="Remark" maxlength="225"
                                   [(ngModel)]="asBbiepDetail().bbiep.remark"
                                   [disabled]="!isEditable(selectedNode)">
                          </mat-form-field>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-md-12 col-sm-12">
                          <mat-form-field>
                            <input matInput placeholder="Example"
                                   [(ngModel)]="asBbiepDetail().bbie.example"
                                   [disabled]="!isEditable(selectedNode)">
                          </mat-form-field>
                        </div>
                      </div>
                      <div class="row form-field-box">
                        <div class="col-md-6 col-sm-12">
                          <mat-card>
                            <mat-card-content
                              matTooltip="This value constraint cannot modify by the definition of the Business Information Entity."
                              [matTooltipDisabled]="!isReflectValue()">
                              <mat-form-field>
                                <mat-select [(ngModel)]="asBbiepDetail().bbie.fixedOrDefault"
                                            [disabled]="!isEditable(selectedNode) ||
                                                        isReflectValue()"
                                            (ngModelChange)="onChangeFixedOrDefault(asBbiepDetail().bbie.fixedOrDefault)">
                                  <mat-option value="none">None</mat-option>
                                  <mat-option value="fixed">Fixed Value</mat-option>
                                  <mat-option value="default">Default Value</mat-option>
                                </mat-select>
                                <mat-label>Value Constraint</mat-label>
                              </mat-form-field>
                              <mat-form-field *ngIf="asBbiepDetail().bbie.fixedOrDefault == 'none'">
                                <input matInput placeholder="No value constraints"
                                       [disabled]="true">
                              </mat-form-field>

                              <mat-form-field *ngIf="asBbiepDetail().bbie.fixedOrDefault == 'fixed'">
                                <input matInput placeholder="Fixed Value"
                                       [(ngModel)]="asBbiepDetail().bbie.fixedValue"
                                       [disabled]="!isEditable(selectedNode) ||
                                                   isReflectValue()">
                              </mat-form-field>

                              <mat-form-field *ngIf="asBbiepDetail().bbie.fixedOrDefault == 'default'">
                                <input matInput placeholder="Default Value"
                                       [(ngModel)]="asBbiepDetail().bbie.defaultValue"
                                       [disabled]="!isEditable(selectedNode) ||
                                                   (isVersionIdNode(selectedNode) && rootNode.version) ||
                                                   isReflectValue()">
                              </mat-form-field>
                            </mat-card-content>
                          </mat-card>
                        </div>
                        <div class="col-md-6 col-sm-12">
                          <mat-card>
                            <mat-card-content>
                              <mat-form-field>
                                <mat-select placeholder="Value Domain Restriction" required
                                            [(ngModel)]="asBbiepDetail().bbie.valueDomainType"
                                            (ngModelChange)="changeValueDomainType(selectedNode)"
                                            [disabled]="!isEditable(selectedNode)">
                                  <mat-option *ngFor="let valueDomainType of valueDomainTypes"
                                              [value]="valueDomainType.valueOf()">
                                    {{ valueDomainType.toString() | separate }}
                                  </mat-option>
                                </mat-select>
                              </mat-form-field>
                              <mat-form-field *ngIf="asBbiepDetail().bbie.valueDomainType === 'Primitive'">
                                <mat-select placeholder="Value Domain" required
                                            [(ngModel)]="asBbiepDetail().bbie.bdtPriRestriId"
                                            (ngModelChange)="changeValueDomainType(selectedNode)"
                                            [disabled]="!isEditable(selectedNode)">
                                  <mat-option>
                                    <ngx-mat-select-search [formControl]="valueDomainFilterCtrl"
                                                           [placeholderLabel]="'Search...'"
                                                           [noEntriesFoundLabel]="'No matching Primitive Value Domain found.'">
                                    </ngx-mat-select-search>
                                  </mat-option>

                                  <mat-option *ngFor="let xbt of filteredValueDomains | async"
                                              [value]="xbt.id">
                                    {{ xbt.name }}
                                  </mat-option>
                                </mat-select>
                              </mat-form-field>

                              <mat-form-field *ngIf="asBbiepDetail().bbie.valueDomainType === 'Code'">
                                <mat-select placeholder="Value Domain" required
                                            [(ngModel)]="asBbiepDetail().bbie.codeListId"
                                            (ngModelChange)="changeValueDomainType(selectedNode)"
                                            [disabled]="!isEditable(selectedNode)">
                                  <mat-option>
                                    <ngx-mat-select-search [formControl]="valueDomainFilterCtrl"
                                                           [placeholderLabel]="'Search...'"
                                                           [noEntriesFoundLabel]="'No matching Code Value Domain found.'">
                                    </ngx-mat-select-search>
                                  </mat-option>

                                  <mat-option *ngFor="let codeList of filteredValueDomains | async"
                                              [value]="codeList.id">
                                    <div [class]="['d-flex', !isValidState(codeList.state) ? 'text-warning' : 'dummy',
                                          codeList.deprecated ? 'deprecated': 'dummy']"
                                         [matTooltip]="'This code list is usable but unstable'"
                                         [matTooltipDisabled]="isValidState(codeList.state)">
                                      <span>{{ codeList.name }}</span>
                                      <span class="f12 ml-auto"> ({{ codeList.versionId }}<span *ngIf="codeList.deprecated">, Deprecated</span>)</span>
                                    </div>
                                  </mat-option>
                                </mat-select>
                              </mat-form-field>

                              <mat-form-field *ngIf="asBbiepDetail().bbie.valueDomainType === 'Agency'">
                                <mat-select placeholder="Value Domain" required
                                            [(ngModel)]="asBbiepDetail().bbie.agencyIdListId"
                                            (ngModelChange)="changeValueDomainType(selectedNode)"
                                            [disabled]="!isEditable(selectedNode)">
                                  <mat-option>
                                    <ngx-mat-select-search [formControl]="valueDomainFilterCtrl"
                                                           [placeholderLabel]="'Search...'"
                                                           [noEntriesFoundLabel]="'No matching Agency Value Domain found.'">
                                    </ngx-mat-select-search>
                                  </mat-option>

                                  <mat-option *ngFor="let agency of filteredValueDomains | async"
                                              [value]="agency.id">
                                    <div [class]="['d-flex', !isValidState(agency.state) ? 'text-warning' : 'dummy',
                                          agency.deprecated ? 'deprecated': 'dummy']"
                                         [matTooltip]="'This agency id list is usable but unstable'"
                                         [matTooltipDisabled]="isValidState(agency.state)">
                                      <span>{{ agency.name }}</span>
                                      <span class="f12 ml-auto"> ({{ agency.versionId }}<span *ngIf="agency.deprecated">, Deprecated</span>)</span>
                                    </div>
                                  </mat-option>
                                </mat-select>
                              </mat-form-field>
                            </mat-card-content>
                          </mat-card>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-12">
                          <mat-form-field>
                            <textarea matInput rows="6"
                                      placeholder="Context Definition"
                                      [(ngModel)]="asBbiepDetail().bbie.definition"
                                      [disabled]="!isEditable(selectedNode)">
                            </textarea>
                          </mat-form-field>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12">
                          <mat-form-field>
                            <textarea matInput rows="6"
                                      placeholder="Association Definition" [disabled]="true"
                                      value="{{ asBbiepDetail().bcc.definition || ' ' }}">
                            </textarea>
                          </mat-form-field>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12">
                          <mat-form-field>
                            <textarea matInput rows="6"
                                      placeholder="Component Definition" [disabled]="true"
                                      value="{{ asBbiepDetail().bccp.definition || ' ' }}">
                            </textarea>
                          </mat-form-field>
                        </div>
                      </div>
                    </div>
                  </mat-tab>
                </mat-tab-group>
              </div>

              <!-- BBIE_SC -->
              <div class="bie-edit-detail-panel scroll" *ngIf="isBbieScDetail()">
                <mat-tab-group mat-align-tabs="start">
                  <mat-tab label="{{ selectedNode.name }}">
                    <div class="bie-edit-detail-container">
                      <div class="row">
                        <div class="col-11">
                          <div class="checkbox">
                            <mat-checkbox color="primary"
                                          [checked]="selectedNode.used"
                                          (click)="toggleDetailUsed(selectedNode, $event)"
                                          [disabled]="!isUsable(selectedNode)"
                                          matTooltip="This component is required."
                                          [matTooltipDisabled]="!selectedNode.required">
                              Used
                            </mat-checkbox>
                          </div>
                        </div>
                        <div class="col-1">
                          <button mat-icon-button (click)="resetDetail(selectedNode)"
                                  *ngIf="state === 'WIP'"
                                  matTooltip="Reset detail"
                                  [disabled]="isUpdating || access !== 'CanEdit' || !selectedNode.used">
                            <mat-icon>refresh</mat-icon>
                          </button>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-6">
                          <mat-form-field>
                            <input matInput placeholder="Cardinality Min" required
                                   [formControl]="bieCardinalityMin">
                            <mat-error *ngIf="bieCardinalityMin.hasError('required')">
                              Cardinality Min is <strong>required</strong>
                            </mat-error>
                            <mat-error
                              *ngIf="!bieCardinalityMin.hasError('min') && bieCardinalityMin.hasError('pattern')">
                              '{{ bieCardinalityMin.value }}' is not allowed for Cardinality Min
                            </mat-error>
                            <mat-error *ngIf="bieCardinalityMin.hasError('min')">
                              Cardinality Min must be greater than or equals
                              to {{ asBbieScDetail().bbieSc.cardinalityMin }}
                            </mat-error>
                            <mat-error *ngIf="bieCardinalityMin.hasError('max')">
                              {{ bieCardinalityMin.getError('max') }}
                            </mat-error>
                          </mat-form-field>
                        </div>
                        <div class="col-6">
                          <mat-form-field>
                            <input matInput placeholder="Cardinality Max (-1 for unbounded, Standard is {{ asBbieScDetail().bdtSc.cardinalityMax | unbounded}})" required
                                   [formControl]="bieCardinalityMax"
                                   [value]="bieCardinalityMax.value | unbounded">
                            <mat-hint *ngIf="bieCardinalityMax.valid && asBbieScDetail().bbieSc.cardinalityMax === 0 &&
                                            (!asBbieScDetail().bbieSc.definition || asBbieScDetail().bbieSc.definition === '')"
                                      style="color: #ff5722;">
                              Context Definition should define why Cardinality Max is zero (0)
                            </mat-hint>

                            <mat-error *ngIf="bieCardinalityMax.hasError('required')">
                              Cardinality Max is <strong>required</strong>
                            </mat-error>
                            <mat-error *ngIf="bieCardinalityMax.hasError('pattern')">
                              '{{ bieCardinalityMax.value }}' is not allowed for Cardinality Max
                            </mat-error>
                            <mat-error *ngIf="bieCardinalityMax.hasError('min')">
                              {{ bieCardinalityMax.getError('min') }}
                            </mat-error>
                            <mat-error *ngIf="bieCardinalityMax.hasError('max')">
                              {{ bieCardinalityMax.getError('max') }}
                            </mat-error>
                          </mat-form-field>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-md-6 col-sm-12">
                          <mat-form-field>
                            <input matInput placeholder="Business Term" maxlength="225"
                                   [(ngModel)]="asBbieScDetail().bbieSc.bizTerm"
                                   [disabled]="!isEditable(selectedNode)">
                          </mat-form-field>
                        </div>
                        <div class="col-md-6 col-sm-12">
                          <mat-form-field>
                            <input matInput placeholder="Remark" maxlength="225"
                                   [(ngModel)]="asBbieScDetail().bbieSc.remark"
                                   [disabled]="!isEditable(selectedNode)">
                          </mat-form-field>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-md-12 col-sm-12">
                          <mat-form-field>
                            <input matInput placeholder="Example"
                                   [(ngModel)]="asBbieScDetail().bbieSc.example"
                                   [disabled]="!isEditable(selectedNode)">
                          </mat-form-field>
                        </div>
                      </div>

                      <div class="row form-field-box">
                        <div class="col-md-6 col-sm-12">
                          <mat-card>
                            <mat-card-content
                              matTooltip="This value constraint cannot modify by the definition of the Business Information Entity."
                              [matTooltipDisabled]="!isReflectValue()">
                              <mat-form-field>
                                <mat-select [(ngModel)]="asBbieScDetail().bbieSc.fixedOrDefault"
                                            [disabled]="!isEditable(selectedNode)||
                                                        isReflectValue()"
                                            (ngModelChange)="onChangeFixedOrDefault(asBbieScDetail().bbieSc.fixedOrDefault)">
                                  <mat-option value="none">None</mat-option>
                                  <mat-option value="fixed">Fixed Value</mat-option>
                                  <mat-option value="default">Default Value</mat-option>
                                </mat-select>
                                <mat-label>Value Constraint</mat-label>
                              </mat-form-field>
                              <mat-form-field *ngIf="asBbieScDetail().bbieSc.fixedOrDefault == 'none'">
                                <input matInput placeholder="No value constraints"
                                       [disabled]="true">
                              </mat-form-field>

                              <mat-form-field *ngIf="asBbieScDetail().bbieSc.fixedOrDefault == 'fixed'">
                                <input matInput placeholder="Fixed Value"
                                       [(ngModel)]="asBbieScDetail().bbieSc.fixedValue"
                                       [disabled]="!isEditable(selectedNode)||
                                                   isReflectValue()">
                              </mat-form-field>

                              <mat-form-field *ngIf="asBbieScDetail().bbieSc.fixedOrDefault == 'default'">
                                <input matInput placeholder="Default Value"
                                       [(ngModel)]="asBbieScDetail().bbieSc.defaultValue"
                                       [disabled]="!isEditable(selectedNode)||
                                                   isReflectValue()">
                              </mat-form-field>
                            </mat-card-content>
                          </mat-card>
                        </div>
                        <div class="col-md-6 col-sm-12">
                          <mat-card>
                            <mat-card-content>
                              <mat-form-field>
                                <mat-select placeholder="Value Domain Restriction" required
                                            [(ngModel)]="asBbieScDetail().bbieSc.valueDomainType"
                                            (ngModelChange)="changeValueDomainType(selectedNode)"
                                            [disabled]="!isEditable(selectedNode)">
                                  <mat-option *ngFor="let valueDomainType of valueDomainTypes"
                                              [value]="valueDomainType.valueOf()">
                                    {{ valueDomainType.toString() | separate }}
                                  </mat-option>
                                </mat-select>
                              </mat-form-field>

                              <mat-form-field *ngIf="asBbieScDetail().bbieSc.valueDomainType === 'Primitive'">
                                <mat-select placeholder="Value Domain" required
                                            [(ngModel)]="asBbieScDetail().bbieSc.bdtScPriRestriId"
                                            (ngModelChange)="changeValueDomainType(selectedNode)"
                                            [disabled]="!isEditable(selectedNode)">
                                  <mat-option>
                                    <ngx-mat-select-search [formControl]="valueDomainFilterCtrl"
                                                           [placeholderLabel]="'Search...'"
                                                           [noEntriesFoundLabel]="'No matching Primitive Value Domain found.'">
                                    </ngx-mat-select-search>
                                  </mat-option>

                                  <mat-option *ngFor="let xbt of filteredValueDomains | async"
                                              [value]="xbt.id">
                                    {{ xbt.name }}
                                  </mat-option>
                                </mat-select>
                              </mat-form-field>

                              <mat-form-field *ngIf="asBbieScDetail().bbieSc.valueDomainType === 'Code'">
                                <mat-select placeholder="Value Domain" required
                                            [(ngModel)]="asBbieScDetail().bbieSc.codeListId"
                                            (ngModelChange)="changeValueDomainType(selectedNode)"
                                            [disabled]="!isEditable(selectedNode)">
                                  <mat-option>
                                    <ngx-mat-select-search [formControl]="valueDomainFilterCtrl"
                                                           [placeholderLabel]="'Search...'"
                                                           [noEntriesFoundLabel]="'No matching Code Value Domain found.'">
                                    </ngx-mat-select-search>
                                  </mat-option>

                                  <mat-option *ngFor="let codeList of filteredValueDomains | async"
                                              [value]="codeList.id">
                                    <div [class]="['d-flex', !isValidState(codeList.state) ? 'text-warning' : 'dummy',
                                          codeList.deprecated ? 'deprecated': 'dummy']"
                                         [matTooltip]="'This code list is usable but unstable'"
                                         [matTooltipDisabled]="isValidState(codeList.state)">
                                      <span>{{ codeList.name }}</span>
                                      <span class="f12 ml-auto"> ({{ codeList.versionId }}<span *ngIf="codeList.deprecated">, Deprecated</span>)</span>
                                    </div>
                                  </mat-option>
                                </mat-select>
                              </mat-form-field>

                              <mat-form-field *ngIf="asBbieScDetail().bbieSc.valueDomainType === 'Agency'">
                                <mat-select placeholder="Value Domain" required
                                            [(ngModel)]="asBbieScDetail().bbieSc.agencyIdListId"
                                            (ngModelChange)="changeValueDomainType(selectedNode)"
                                            [disabled]="!isEditable(selectedNode)">
                                  <mat-option>
                                    <ngx-mat-select-search [formControl]="valueDomainFilterCtrl"
                                                           [placeholderLabel]="'Search...'"
                                                           [noEntriesFoundLabel]="'No matching Agency Value Domain found.'">
                                    </ngx-mat-select-search>
                                  </mat-option>

                                  <mat-option *ngFor="let agency of filteredValueDomains | async"
                                              [value]="agency.id">
                                    <div [class]="['d-flex', !isValidState(agency.state) ? 'text-warning' : 'dummy',
                                          agency.deprecated ? 'deprecated': 'dummy']"
                                         [matTooltip]="'This agency id list is usable but unstable'"
                                         [matTooltipDisabled]="isValidState(agency.state)">
                                      <span>{{ agency.name }}</span>
                                      <span class="f12 ml-auto"> ({{ agency.versionId }}<span *ngIf="agency.deprecated">, Deprecated</span>)</span>
                                    </div>
                                  </mat-option>
                                </mat-select>
                              </mat-form-field>
                            </mat-card-content>
                          </mat-card>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-12">
                          <mat-form-field>
                            <textarea matInput rows="6"
                                      placeholder="Context Definition"
                                      [(ngModel)]="asBbieScDetail().bbieSc.definition"
                                      [disabled]="!isEditable(selectedNode)">
                            </textarea>
                          </mat-form-field>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-12">
                          <mat-form-field>
                            <textarea matInput rows="6"
                                      placeholder="Component Definition" [disabled]="true"
                                      value="{{ asBbieScDetail().bdtSc.definition || ' ' }}">
                            </textarea>
                          </mat-form-field>
                        </div>
                      </div>
                    </div>
                  </mat-tab>
                </mat-tab-group>
              </div>
            </as-split-area>
          </as-split>
        </div>
      </div>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
